(()=>{"use strict";const t=".artdeco-list__item",e=".artdeco-entity-lockup__title",n=".artdeco-entity-lockup__subtitle",r=".artdeco-entity-lockup__caption",i=".artdeco-entity-lockup__metadata-item",s="a.artdeco-entity-lockup__title-link",o="a.artdeco-entity-lockup__subtitle-link",a="button.artdeco-pagination__button--next",c=".artdeco-loader";new class{constructor(){this.isRunning=!1,this.initializeMessageListener()}initializeMessageListener(){chrome.runtime.onMessage.addListener(((t,e,n)=>{"START_SCRAPING"===t.type?this.startScraping():"STOP_SCRAPING"===t.type&&this.stopScraping()}))}async startScraping(){this.isRunning=!0,await this.scrapeCurrentPage()}stopScraping(){this.isRunning=!1}async scrapeCurrentPage(){if(this.isRunning)try{const t=await this.extractProfilesFromPage();this.sendMessage("SCRAPED_DATA",t),this.sendMessage("PAGE_PROCESSED"),this.isRunning&&await this.handlePagination()}catch(t){const e=t instanceof Error?t.message:"Unknown error occurred";this.sendMessage("CONTENT_SCRIPT_ERROR",{error:e})}}async extractProfilesFromPage(){const e=Array.from(document.querySelectorAll(t)),n=[];for(const t of e){if(!this.isRunning)break;const e=this.extractProfileData(t);e&&n.push(e)}return n}extractProfileData(t){try{const a=t.querySelector(e)?.textContent?.trim()||"",c=t.querySelector(n)?.textContent?.trim()||"",l=t.querySelector(r)?.textContent?.trim()||"",u=t.querySelector(i)?.textContent?.trim()||"",d=t.querySelector(s),g=t.querySelector(o);return a&&d?.href?{name:a,title:c,company:l,location:u,profileUrl:d.href,linkedInUrl:g?.href||"",timestamp:(new Date).toISOString()}:null}catch(t){return console.error("Error extracting profile data:",t),null}}async handlePagination(){const t=document.querySelector(a);t&&!t.disabled?(t.click(),await this.waitForNewContent()):this.stopScraping()}async waitForNewContent(){return new Promise((t=>{const e=new MutationObserver(((e,n)=>{document.querySelector(c)||(n.disconnect(),t())}));e.observe(document.body,{childList:!0,subtree:!0}),setTimeout((()=>{e.disconnect(),t()}),1e4)}))}sendMessage(t,e){chrome.runtime.sendMessage({type:t,payload:e})}}})();